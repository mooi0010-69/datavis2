{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Side-by-side comparison of female and male population with crime counts by state.",
  "hconcat": [
    {
      "width": 200,
      "height": 350,
      "title": {
        "text": "Female Population and Crime Counts",
        "anchor": "start",
        "fontSize": 16,
        "fontWeight": "bold"
      },
      "data": {
        "url": "https://raw.githubusercontent.com/mooi0010-69/datavis2/refs/heads/main/cleaned_data/female_pop_state.csv"
      },
      "transform": [
        {
          "lookup": "State",
          "from": {
            "data": {
              "url": "https://raw.githubusercontent.com/mooi0010-69/datavis2/refs/heads/main/cleaned_data/crimes_gender.csv"
            },
            "key": "State",
            "fields": ["Female"]
          }
        },
        {"calculate": "replace(datum.Female, ',', '')", "as": "Female_NoComma"},
        {"calculate": "toNumber(datum.Female_NoComma)", "as": "Female_Crimes"},
        {"calculate": "toNumber(datum.Female_Population)", "as": "Female_Population"}
      ],
      "encoding": {
        "x": {
          "field": "State",
          "type": "ordinal",
          "axis": {"labelAngle": -45, "title": "State", "labelFontSize": 10}
        }
      },
      "layer": [
        {
          "mark": {"type": "bar", "color": "#FBB4B4"},
          "encoding": {
            "y": {
              "field": "Female_Population",
              "type": "quantitative",
              "axis": {"title": "Female Population", "titleFontSize": 12, "labelFontSize": 10}
            },
            "tooltip": [
              {"field": "State", "title": "State"},
              {"field": "Female_Population", "title": "Population", "format": ","}
            ]
          }
        },
        {
          "mark": {"type": "line", "color": "#E74C3C", "point": true, "strokeWidth": 2},
          "encoding": {
            "y": {
              "field": "Female_Crimes",
              "type": "quantitative",
              "axis": {"title": "Female Crimes", "titleFontSize": 12, "labelFontSize": 10},
              "scale": {"domain": [0, 30000]}
            },
            "tooltip": [
              {"field": "State", "title": "State"},
              {"field": "Female_Crimes", "title": "Crimes", "format": ","}
            ]
          }
        }
      ],
      "resolve": {"scale": {"y": "independent"}}
    },
    {
      "width": 200,
      "height": 350,
      "title": {
        "text": "Male Population and Crime Counts",
        "anchor": "start",
        "fontSize": 16,
        "fontWeight": "bold"
      },
      "data": {
        "url": "https://raw.githubusercontent.com/mooi0010-69/datavis2/refs/heads/main/cleaned_data/male_pop_state.csv"
      },
      "transform": [
        {
          "lookup": "State",
          "from": {
            "data": {
              "url": "https://raw.githubusercontent.com/mooi0010-69/datavis2/refs/heads/main/cleaned_data/crimes_gender.csv"
            },
            "key": "State",
            "fields": ["Male"]
          }
        },
        {"calculate": "replace(datum.Male, ',', '')", "as": "Male_NoComma"},
        {"calculate": "toNumber(datum.Male_NoComma)", "as": "Male_Crimes"},
        {"calculate": "toNumber(datum.Male_Population)", "as": "Male_Population"}
      ],
      "encoding": {
        "x": {
          "field": "State",
          "type": "ordinal",
          "axis": {"labelAngle": -45, "title": "State", "labelFontSize": 10}
        }
      },
      "layer": [
        {
          "mark": {"type": "bar", "color": "#9DCAEB"},
          "encoding": {
            "y": {
              "field": "Male_Population",
              "type": "quantitative",
              "axis": {"title": "Male Population", "titleFontSize": 12, "labelFontSize": 10}
            },
            "tooltip": [
              {"field": "State", "title": "State"},
              {"field": "Male_Population", "title": "Population", "format": ","}
            ]
          }
        },
        {
          "mark": {"type": "line", "color": "#1F77B4", "point": true, "strokeWidth": 2},
          "encoding": {
            "y": {
              "field": "Male_Crimes",
              "type": "quantitative",
              "axis": {"title": "Male Crimes", "titleFontSize": 12, "labelFontSize": 10},
              "scale": {"domain": [0, 90000]}
            },
            "tooltip": [
              {"field": "State", "title": "State"},
              {"field": "Male_Crimes", "title": "Crimes", "format": ","}
            ]
          }
        }
      ],
      "resolve": {"scale": {"y": "independent"}}
    }
  ],
  "config": {
    "font": "Arial, Helvetica, sans-serif",
    "legend": {"labelFontSize": 10, "titleFontSize": 12}
  }
}

